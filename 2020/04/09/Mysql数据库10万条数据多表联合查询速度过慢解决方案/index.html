<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>pokome</title>
<meta name="generator" content="Hexo 6.2.0"></head>
 
<body>
    <!-- 网站名 -->
    <h1>
        <a href="/">Hexo</a> |
        <a href="/">Home</a> | 
        <a href="/pumily/pumily/archives">Archive</a> | 
        <a href="/about/">About</a>
    </h1>
    <!-- 博客详情 -->
 

<h2>Mysql数据库10万条数据多表联合查询速度过慢解决方案</h2>
<p>2020/04/09 </p>
<h2 id="Mysql数据库10万条数据多表联合查询速度过慢解决方案"><a href="#Mysql数据库10万条数据多表联合查询速度过慢解决方案" class="headerlink" title="Mysql数据库10万条数据多表联合查询速度过慢解决方案"></a>Mysql数据库10万条数据多表联合查询速度过慢解决方案</h2><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>今天在写项目时发现之前好好的查询接口突然挂了🤔，检查后发现原来是有人往数据里新增了10万条数据，以至于Mysql语句执行的特别慢就不行了。</p>
<h4 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h4><p>原因也简单这个接口原本是一张组织机构表关联区域表、组织标准类型表、币种表、行业分类标准表等多张表的联合查询。按照下图的写法已经写了limit分页只取10条，可Mysql确实会很认真的先帮你把10万条数据的外键关系先建立起来，然后在拿最上面的10条给你。emmmmm……🐴🥚  </p>
<p><img src="https://qiniu.pokio.fun/2020/04/09/1a8766805904d8ad14a0e26d9fe3ecf5.jpg" alt="image"></p>
<span id="more"></span>所以数据量一旦多起来后，Mysql的遍历查询结果就不尽人意，10万条语句这一次查询差不多就要3分多钟。

<h4 id="解决思路"><a href="#解决思路" class="headerlink" title="解决思路"></a>解决思路</h4><p>解决思路也很简单，我目前想到的做法就是在Mysql与关联表进行关联操作之前，先通过分页、查询条件、约束等减小它的范围。简单点说就是，<strong>先查再建视图</strong>。</p>
<h4 id="实际步骤"><a href="#实际步骤" class="headerlink" title="实际步骤"></a>实际步骤</h4><p>直接放优化后的语句叭<br><img src="https://qiniu.pokio.fun/2020/04/09/78a53e3a869f04e42c7d762b02fb653d.jpg" alt="image"></p>
<h4 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h4><p>最后再看看优化后的速度<br><img src="https://qiniu.pokio.fun/2020/04/09/e94da2719145ea9ac1d93e055f0b628a.jpg" alt="image"><br>0.083秒。恩……真香！🎉</p>
 


    <h5>
        <a href="/pumily/pumily/2022/01/01/2021%E5%B9%B4%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/">
            < 上一篇：2021年年度总结
        </a>
    </h5>



    <h5>
        <a href="/pumily/pumily/2020/03/12/JS%E6%B8%85%E7%A9%BA%E5%BD%93%E5%89%8D%E5%9F%9F%E5%90%8D%E4%B8%8B%E7%9A%84%E6%89%80%E6%9C%89Cookie/">
            下一篇：JS清空当前域名下的所有Cookie >
        </a>
    </h5>

 

    <h3>categories</h3>
    <ul>
        
            <li>
                <a href="/pumily/pumily/categories/%E9%9A%8F%E6%84%9F/">
                    随感 
                </a>
            </li>
        
            <li>
                <a href="/pumily/pumily/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/">
                    技术开发 
                </a>
            </li>
        
    </ul>

    <h3>tags</h3>
    <ul>
        
    </ul>
</body>
</html>
